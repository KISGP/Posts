---
title: 可迭代对象
tags:
  - JS 
---

>https://zh.javascript.info/iterable#symboliterator

正常情况下，下面代码在运行时会报错，提示 obj 不是一个迭代器。

```js
let obj = {
  a: 1,
  b: 2
};

const [a, b] = obj; // TypeError: obj is not iterable

for (let value of obj) {// TypeError: obj is not iterable
  console.log(value);
}
```

如果要让这部分代码正常运行只需要将 obj 变成可迭代对象。只需要 obj 这个对象上存在 `[Symbol.iterator]` 属性，这个属性是一个函数，这个函数返回一个迭代器。

```js
// 直接在对象里面添加
obj = {
	...obj,
	[Symbol.iterator]: function* () {
		for (let key in this) {
			yield this[key];
		}
	}
  // [Symbol.iterator]: function*() 的简写形式
  *[Symbol.iterator]() { 
  }
};

// 在原型链上添加
Object.prototype[Symbol.iterator] = function* () {
	for (let key in this) {
		yield this[key];
	}
};


// 在原型链上添加（直接调用数组的迭代器）
Object.prototype[Symbol.iterator] = function(){
	const arr = Object.values(this);

	return arr[Symbol.iterator]();
}
```